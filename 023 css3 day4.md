# 23 CSS3 - 4

伸缩布局 切割轮播图

---


## animate.css 库的使用
官网: https://daneden.github.io/animate.css/

作用：将一切常见的动画直接封装，开发者不需要考虑实现过程，只需要添加对应的类就能实现动画效果

使用步骤：
1. 将下载下来的animate.css 引入到你的项目中
2. 去官网获取想要的效果 给对应的元素添加上animated 类 （必填）和你想要的效果的类
```
<link rel="stylesheet" href="animate.css">

<div class="box flip animated infinite"></div>
```


## flex布局
Flex是Flexible Box的缩写，意为"弹性布局"，用来为盒状模型提供最大的灵活性。任何一个容器都可以指定为Flex布局
```
.box{
  display: flex;
}

/*行内元素也可以使用Flex布局。*/
.box{
  display: inline-flex;
}

/*Webkit内核的浏览器，必须加上-webkit前缀。*/
.box{
  display: -webkit-flex; /* Safari */
  display: flex;
}
```
**注意**，设为Flex布局以后, 子元素的float、clear和vertical-align属性将失效

### 基本概念
采用Flex布局的元素，称为Flex容器(flex container)，简称"容器"。它的所有子元素自动成为容器成员，称为Flex项目(flex item)，简称"项目"
```
┌──────────────────────────────────┳────────────┐
│  flex container       ↑          ↑            │
│                       |     [cross start]     │
│                   cross axis                  │
│←----- main axis ------┼----------------------→│
│   ┌───────────────┐   |   ┌───────────────┐   │
│   |flex item      |   |   |flex item   ↑  |   │
│   |               |   |   |            |  |   │
│   |←- main size -→|   |   |    cross size |   │
│   |               |   |   |            ↓  |   │
│   └───────────────┘   |   └───────────────┘   |
│                       |                       │
┣← <main start>         |           <main end> →┫
│                       |      [cross end]      │
│                       ↓           ↓           │
└───────────────────────────────────┻───────────┘
```
容器默认存在两根轴：水平的主轴(main axis)和垂直的交叉轴(cross axis)

主轴的开始位置(与边框的交叉点)叫做main start，结束位置叫做main end；交叉轴的开始位置叫做cross start，结束位置叫做cross end

项目默认沿主轴排列。单个项目占据的主轴空间叫做main size，占据的交叉轴空间叫做cross size

### 容器属性 (container属性)
1. flex-direction : 主轴方向
2. flex-wrap : 换行属性
3. flex-flow : 上面2个的简写
4. justify-content : 主轴对齐方式
5. align-items : 侧轴对齐方式
6. align-content : 多轴对齐方式

---
#### 1. flex-direction 决定主轴的方向(项目的排列方向)
```
─── row(默认) ──→        ←── row-reverse ───
   ██ ██ ██ ██               ██ ██ ██ ██  

   ██ |               ██ ↑
   ██ column          ██ |
   ██ |               ██ column-reverse
   ██ ↓               ██ |
```
1. row(默认): 主轴水平方向, 起点在左端
2. row-reverse: 主轴水平方向, 起点在右端
3. column: 主轴为垂直方向, 起点在上沿
4. column-reverse: 主轴为垂直方向, 起点在下沿

---
#### 2. flex-wrap属性
默认情况下, 项目都排列在一条线上, flex-wrap定义的是如果一条线上排不下了, 怎么换行
```
.box{
  flex-wrap: nowrap | wrap | wrap-reverse;
}

//1. nowrap(默认): 不换行 (压扁了)
┌──────────────────────────────────────────────────┐
│┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐|
||b1 ||b2 ||b3 ||b4 ||b5 ||b6 ||b7 ||b8 ||b9 ||b10||
│└───┘└───┘└───┘└───┘└───┘└───┘└───┘└───┘└───┘└───┘|
│                                                  |
│                                                  |
│                                                  |
│                                                  │
└──────────────────────────────────────────────────┘

//2. wrap: 换行, 第一行在上方
┌─────────────────────────────────────────────────┐
│┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐|
||box1 ||box2 ||box3 ||box4 ||box5 ||box6 ||box7 |│
│└─────┘└─────┘└─────┘└─────┘└─────┘└─────┘└─────┘│
│┌─────┐┌─────┐┌─────┐                            │
│|box8 ||box9 ||box10|                            │
│└─────┘└─────┘└─────┘                            |
│                                                 |
│                                                 │
└─────────────────────────────────────────────────┘

//3. wrap-reverse: 换行, 第一行在下方
┌─────────────────────────────────────────────────┐
│                                                 |
│                                                 |
│┌─────┐┌─────┐┌─────┐                            │
│|box8 ||box9 ||box10|                            │
│└─────┘└─────┘└─────┘                            |
│┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐┌─────┐|
||box1 ||box2 ||box3 ||box4 ||box5 ||box6 ||box7 |│
│└─────┘└─────┘└─────┘└─────┘└─────┘└─────┘└─────┘│
└─────────────────────────────────────────────────┘
```
---
#### 3. flex-flow
flex-flow属性是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap
```
.box {
  flex-flow: <flex-direction> || <flex-wrap>;
}
```

#### 4. justify-content属性
justify-content属性定义了项目在主轴上的对齐方式
```
.box {
  justify-content: flex-start | flex-end | center | space-between | space-around;
}

// flex-start(默认值) 左对齐
┌─────────────────────────────────────────────────┐
│┌───────┐┌────┐┌──────────┐                      |
|| box1  || b2 ||   box3   |                      │
│└───────┘└────┘└──────────┘                      │
└─────────────────────────────────────────────────┘
// flex-end 右对齐
┌─────────────────────────────────────────────────┐
│                       ┌────────┐┌────┐┌────────┐|
|                       |  box1  || b2 ||  box3  |│
│                       └────────┘└────┘└────────┘│
└─────────────────────────────────────────────────┘
// center 居中
┌────────────────────────────────────────────────┐
│           ┌────────┐┌────┐┌────────┐           |
|           |  box1  || b2 ||  box3  |           │
│           └────────┘└────┘└────────┘           │
└────────────────────────────────────────────────┘
// space-between 两端对齐
┌─────────────────────────────────────────────────┐
│┌───────┐           ┌────┐           ┌──────────┐|
|| box1  |           | b2 |           |   box3   |│
│└───────┘           └────┘           └──────────┘|
└─────────────────────────────────────────────────┘
// space-around 均分对齐
┌────────────────────────────────────────────────┐
│    ┌────────┐      ┌────┐        ┌────────┐    |
|    |  box1  |      | b2 |        |  box3  |    │
│    └────────┘      └────┘        └────────┘    │
└────────────────────────────────────────────────┘
```
---
#### 5. align-items属性
align-items属性定义项目在侧轴上如何对齐
```
.box {
  align-items: flex-start | flex-end | center | baseline | stretch;
}

// flex-start 顶部对齐    // flex-end 底部对齐
┌──────────────────────┐ ┌──────────────────────┐
│██    ██     ██     ██| │                      │
│██    ██     ██     ██| │                      │
│      ██            ██│ │                      │
│      ██            ██│ │      ██            ██│
│                      │ │      ██            ██│
│                      │ │██    ██     ██     ██|
│                      │ │██    ██     ██     ██|
└──────────────────────┘ └──────────────────────┘

// center 垂直居中       // stretch(默认)拉伸填满
┌──────────────────────┐ ┌──────────────────────┐
│                      │ │██    ██     ██     ██|
│      ██            ██│ │██    ██     ██     ██|
│██    ██     ██     ██│ │██    ██     ██     ██|
│██    ██     ██     ██│ │██    ██     ██     ██|
│      ██            ██│ │██    ██     ██     ██|
│                      │ │██    ██     ██     ██|
└──────────────────────┘ └──────────────────────┘
// baseline
 ┌──────────────────────────────────────────────┐
 │┌────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐│
_____text_______abcc________love________testt______
 ||        | |         | |         | |         ||
 │└────────┘ └─────────┘ └─────────┘ └─────────┘|
 │                                              |
 └──────────────────────────────────────────────┘
 
//它可能取5个值。具体的对齐方式与交叉轴的方向有关，下面假设交叉轴从上到下

flex-start：交叉轴的起点对齐。
flex-end：交叉轴的终点对齐。
center：交叉轴的中点对齐。
baseline: 项目的第一行文字的基线对齐。
stretch（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度
```
---
#### 6. align-content属性
align-content属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用
```
.box {
  align-content: flex-start | flex-end | center | space-between | space-around | stretch;
}

//举例 center (多行的垂直居中)
  ┌─────────────────────────────────────────────┐
  │                                             |
  │███ █ █████ █████████ ███ ██ █ █████ ███ ████|
---█████ ██ ██████ █ ███████ ████████ █ █████ ██---
  │█ ████ ████                                  |
  │                                             |
  └─────────────────────────────────────────────┘

//该属性可能取6个值。

flex-start：与交叉轴的起点对齐。
flex-end：与交叉轴的终点对齐。
center：与交叉轴的中点对齐。
space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。
space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。
stretch（默认值）：轴线占满整个交叉轴。
```
---
### 项目属性(item属性)
1. order : 排序(类似Zindex)
2. flex-grow : 占位比例(放大)
3. flex-shrink : 占位比例(缩小)
4. flex-basis : 主轴占比
5. flex : 以上3个值简写
6. align-self : 单独处理的align-items属性

---
#### 1. order属性
order属性定义项目的排列顺序。数值越小，排列越靠前，默认为0
```
.item {
  order: <integer>;
}

//举例: [-1] [1] [1] [1] [2] [2] [5] [99] [999]……
```

#### 2. flex-grow属性
flex-grow属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大
```
.item {
  flex-grow: <number>; /* default 0 */
}
```
如果所有项目的flex-grow属性都为1，则它们将等分空间。如果一个项目的flex-grow属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍

#### 3. flex-shrink属性
flex-shrink属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小
```
.item {
  flex-shrink: <number>; /* default 1 */
}
```
如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小, 负值无效

#### 4. flex-basis属性
flex-basis属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小
```
.item {
  flex-basis: <length> | auto; /* default auto */
}
//可以是百分比, 可以是像素 **flex版的width**
```
它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间

#### 5. flex属性
flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选
```
.item {
  flex: none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]
}
```
有2个快捷值: auto (1 1 auto) 和 none (0 0 auto), 优先使用这2个快捷值.

#### 6. align-self属性
align-self属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch
```
.item {
  align-self: auto | flex-start | flex-end | center | baseline | stretch;
}
```
默认值比align-items多一个auto, 其他一样


### 切割轮播图

1. 布局ul>li, li里面分别处理3D转动, 变成立方体
2. 两侧按钮盒子可以设置height为0, position: reletive, 这样不占位置, top设置负值进行上移, 按钮左右浮动
3. 按钮绑定事件, 利用计数器, 让ul围绕X轴转动
4. 单个转动已经完成
5. 多个转动其实就是复制了3个ul, 一共4个ul
6. 设定box的display为flex, ul的flex为1, 这样每个ul自动占一份位置
7. **注意:** 此时给li加`overflow: hidden`, 给box和ul加会有异常
8. 设置第2,3,4的ul里的img, 向左移(margin-left), 让4个ul拼成一张完整图片
9. 按钮事件里设置每个ul转动的延迟, 这样基本功能完成
10. 优化: 添加节流, 利用flag, 点击后变为false, 当动画播放完毕了, 再变为true
```
//节流阀  引入了jquery
$('ul').last().on('transitionend', function() {
    flag = true;
})
```


Tags： black_horse



